"use strict";
const express = require('express');
const imageRouter = express.Router();
const auth = require('../middlewares/auth');
const upload = require('../config/imageUpload');
const singleUpload = upload.single('image');
imageRouter.post('/', auth.required, function (req, res) {
    singleUpload(req, res, function (err) {
        if (err) {
            return res.status(422).send({ errors: [{ title: 'Image Upload Error (only jpeg png)', detail: err.message }] });
        }
        return res.json({ 'imageUrl': req.file.location, 'imageName': req.file.originalname });
    });
});
module.exports = imageRouter;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW1hZ2VSb3V0ZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi9zcmMvcm91dGVzL2ltYWdlUm91dGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFBQSxNQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkMsTUFBTSxXQUFXLEdBQUcsT0FBTyxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQ3JDLE1BQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDO0FBRTVDLE1BQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBRWhELE1BQU0sWUFBWSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLENBQUM7QUFFNUMsV0FBVyxDQUFDLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLFFBQVEsRUFBRSxVQUFTLEdBQUcsRUFBRSxHQUFHO0lBRXBELFlBQVksQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLFVBQVMsR0FBRztRQUNqQyxJQUFJLEdBQUcsRUFBRTtZQUNQLE9BQU8sR0FBRyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFDLEtBQUssRUFBRSxvQ0FBb0MsRUFBRSxNQUFNLEVBQUUsR0FBRyxDQUFDLE9BQU8sRUFBQyxDQUFDLEVBQUMsQ0FBQyxDQUFDO1NBQzdHO1FBRUQsT0FBTyxHQUFHLENBQUMsSUFBSSxDQUFDLEVBQUMsVUFBVSxFQUFFLEdBQUcsQ0FBQyxJQUFJLENBQUMsUUFBUSxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUMsSUFBSSxDQUFDLFlBQVksRUFBQyxDQUFDLENBQUM7SUFDdkYsQ0FBQyxDQUFDLENBQUM7QUFDTCxDQUFDLENBQUMsQ0FBQztBQUVILE1BQU0sQ0FBQyxPQUFPLEdBQUcsV0FBVyxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXhwcmVzcyA9IHJlcXVpcmUoJ2V4cHJlc3MnKTtcclxuY29uc3QgaW1hZ2VSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5jb25zdCBhdXRoID0gcmVxdWlyZSgnLi4vbWlkZGxld2FyZXMvYXV0aCcpO1xyXG5cclxuY29uc3QgdXBsb2FkID0gcmVxdWlyZSgnLi4vY29uZmlnL2ltYWdlVXBsb2FkJyk7XHJcblxyXG5jb25zdCBzaW5nbGVVcGxvYWQgPSB1cGxvYWQuc2luZ2xlKCdpbWFnZScpO1xyXG5cclxuaW1hZ2VSb3V0ZXIucG9zdCgnLycsIGF1dGgucmVxdWlyZWQsIGZ1bmN0aW9uKHJlcSwgcmVzKSB7XHJcbiAgICAvL0B0cy1pZ25vcmVcclxuICBzaW5nbGVVcGxvYWQocmVxLCByZXMsIGZ1bmN0aW9uKGVycikge1xyXG4gICAgaWYgKGVycikge1xyXG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg0MjIpLnNlbmQoe2Vycm9yczogW3t0aXRsZTogJ0ltYWdlIFVwbG9hZCBFcnJvciAob25seSBqcGVnIHBuZyknLCBkZXRhaWw6IGVyci5tZXNzYWdlfV19KTtcclxuICAgIH1cclxuICAgIC8vQHRzLWlnbm9yZVxyXG4gICAgcmV0dXJuIHJlcy5qc29uKHsnaW1hZ2VVcmwnOiByZXEuZmlsZS5sb2NhdGlvbiwgJ2ltYWdlTmFtZSc6IHJlcS5maWxlLm9yaWdpbmFsbmFtZX0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbm1vZHVsZS5leHBvcnRzID0gaW1hZ2VSb3V0ZXI7Il19